## ğŸ“ŒA non-serializable value was detected in an action, in the path: `payload` . Value: Client {stomp:varius~~~}

![errorImage](../trouble1png.png)



í•´ë‹¹ ì—ëŸ¬ëŠ” ë¦¬ë•ìŠ¤ íˆ´í‚·ì„ ì‚¬ìš©í•˜ë˜ ì¤‘ ë°œìƒí•œ ì—ëŸ¬ë¡œ, STOMP.jsë¡œ ìƒì„±í•œ `Client`ê°€ ì§ë ¬í™”ê°€ ê°€ëŠ¥í•˜ì§€ ì•Šì€ ê°’ì´ë¼ ë¦¬ë•ìŠ¤ ì›ì¹™ì— ë§ì§€ì•Šì•„ë‚œ ì—ëŸ¬ì´ë‹¤.

`Serializable value` ì¦‰ ì§ë ¬í™” ê°€ëŠ¥í•œ ê°’ì€ ë°ì´í„°ë‚˜ ê°ì²´ë¥¼ ë©”ëª¨ë¦¬ ì™¸ë¶€ë¡œ ì €ì¥í•˜ê±°ë‚˜ ì „ì†¡í•  ìˆ˜ ìˆëŠ” í˜•ì‹ì„ ì˜ë¯¸í•œë‹¤. ì´ ë°ì´í„°ëŠ” ì¼ë ¨ì˜ ë°”ì´íŠ¸ë¡œ ë³€í™˜í•´ íŒŒì¼, ë°ì´í„° ë² ì´ìŠ¤, ë„¤íŠ¸ì›Œí¬ë¡œ ì‰½ê²Œ ì €ì¥ ì „ì†¡í•  ìˆ˜ ìˆë‹¤. ê·¸ ëŒ€í‘œì ì¸ ì˜ˆê°€ JSONì´ë‹¤.


ì—ëŸ¬ê°€ ë‚¬ë˜ ëŒ€ëª©ì˜ ì½”ë“œì´ë‹¤. 

```typescript
export const initializeWebSocket = createAsyncThunk(
  'webSocket/initializeWebSocket',
  async (_, { dispatch }) => {
    const client = new Client({
      brokerURL: `${import.meta.env.VITE_BROKER_URL}/gs-guide-websocket`,
      debug: (str) => {
        console.log('bug', str);
      },
      reconnectDelay: 50000,
      heartbeatIncoming: 4000,
      heartbeatOutgoing: 4000,
    });

    client.onConnect = () => {
      dispatch(setConnected(true));
      console.log('WebSocket connected');
      // Subscribe to any topics here
      client.subscribe('/notification/room/1', (message) => {
        console.log('Chat room created:', message.body);
      });
    };

    client.onDisconnect = () => {
      dispatch(setConnected(false));
      console.log('WebSocket disconnected');
    };

    client.activate();
    dispatch(setClient(client));

    return client;
  }
);
```

client ë°ì´í„°ê°€ ì™œ ì§ë ¬í™”ê°€ ë¶ˆê°€í•œ ê°’ì¸ì§„ ëª¨ë¥´ê² ìœ¼ë‚˜, ì¼ë‹¨ ë¦¬ë•ìŠ¤ ì‚¬ìš©ì„ ìœ„í•´ì„œëŠ” ì´ë¥¼ ê°€ëŠ¥í•˜ë„ë¡ ë§Œë“¤ì–´ì•¼ í•œë‹¤. 

í•´ê²°ì— ì°¸ê³ í•œ ë¬¸ì„œ:
https://redux-toolkit.js.org/usage/usage-guide#working-with-non-serializable-data 

ìœ„ ê³µì‹ë¬¸ì„œì— ë”°ë¥´ë©´ ë¹„ì§ë ¬í™” ê°€ëŠ¥í•œ ë°ì´í„°ë¥¼ ìˆ˜ìš© í•´ì•¼ í•˜ëŠ” ê²½ìš°ê°€ ë§¤ìš° ë“œë¬¼ì§€ë§Œ
ë¯¸ë“¤ì›¨ì–´ë¥¼ ì‚¬ìš©í•´ íŠ¹ì • ì•¡ì…˜ ìœ í˜•ì´ë‚˜ ì•¡ì…˜ ë° ìƒíƒœì˜ í•„ë“œë¥¼ ë¬´ì‹œí•˜ë„ë¡ êµ¬ì„±í•  ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ ì € Clientê°€ payloadë¡œ ì‚¬ìš©ë˜ëŠ” ì•¡ì…˜ë“¤ì´ ì§ë ¬í™” ì—¬ë¶€ë¥¼ ë¬´ì‹œí•˜ë„ë¡ ë¯¸ë“¤ì›¨ì–´ë¥¼ ì„¤ì •í•´ì£¼ì—ˆë‹¤.

```javascript
import { configureStore } from '@reduxjs/toolkit';
import webSocketReducer from '@/redux/webSocketSlice';
import usersReducer from '@/redux/userSlice';

const store = configureStore({
  reducer: { webSocket: webSocketReducer, user: usersReducer },
  middleware: (getDefaultMiddleware) =>
    getDefaultMiddleware({
      serializableCheck: {
        ignoredActions: ['webSocket/setClient', 'webSocket/setConnected', 'webSocket/initializeWebSocket/fulfilled'], //Clientê°€ ì“°ì´ëŠ” ì•¡ì…˜ë“¤ì˜ ê²½ê³  ë¬´ì‹œí•˜ê¸°
        ignoredPaths: ['webSocket.client'],
      },
    }),
});
export type RootState = ReturnType<typeof store.getState>;
export type AppDispatch = typeof store.dispatch;
export default store;

```



## ğŸ“ŒA non-serializable value was detected in an action, in the path: `payload` . Value: Client {stomp:varius~~~}
